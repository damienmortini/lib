const a5_0x290a=['runGroup','createApiAxiosInstance','mapRespToPerfEntry','post','data','axiosMultipleTries','agentName','branch','../../../utilities/axios','done','throw','apiAxiosInstance','axiosException','RUNNER_FAILURE_PERF_ENTRY','error','apply','ciExecutionEnv','ciExecutionId','note','ciExecutionId:\x20','Completing\x20with\x20an\x20error','tasks','VERBOSE_LOGGING','Completed\x20run\x20group\x20with\x20an\x20error','../../../utilities/nx-imports','/nx-cloud/executions/tasks','dtePollTasks','__awaiter','runGroup:\x20','DistributedAgentApi','response','defineProperty','value','recordMetric','then'];(function(_0x2bbc42,_0x290a61){const _0x240bcb=function(_0x28529e){while(--_0x28529e){_0x2bbc42['push'](_0x2bbc42['shift']());}};_0x240bcb(++_0x290a61);}(a5_0x290a,0x11b));const a5_0x240b=function(_0x2bbc42,_0x290a61){_0x2bbc42=_0x2bbc42-0x0;let _0x240bcb=a5_0x290a[_0x2bbc42];return _0x240bcb;};'use strict';var __awaiter=this&&this[a5_0x240b('0x18')]||function(_0x266487,_0x49459c,_0xfbdb4f,_0x3e3e04){function _0x17a8f9(_0x371af0){return _0x371af0 instanceof _0xfbdb4f?_0x371af0:new _0xfbdb4f(function(_0x4e3197){_0x4e3197(_0x371af0);});}return new(_0xfbdb4f||(_0xfbdb4f=Promise))(function(_0x8470a,_0xe9e71b){function _0x2ac819(_0x544417){try{_0x1ee13b(_0x3e3e04['next'](_0x544417));}catch(_0x245197){_0xe9e71b(_0x245197);}}function _0x34e97d(_0x25cc77){try{_0x1ee13b(_0x3e3e04[a5_0x240b('0x7')](_0x25cc77));}catch(_0x50933b){_0xe9e71b(_0x50933b);}}function _0x1ee13b(_0x27f3fc){_0x27f3fc[a5_0x240b('0x6')]?_0x8470a(_0x27f3fc['value']):_0x17a8f9(_0x27f3fc[a5_0x240b('0x1d')])[a5_0x240b('0x1f')](_0x2ac819,_0x34e97d);}_0x1ee13b((_0x3e3e04=_0x3e3e04[a5_0x240b('0xc')](_0x266487,_0x49459c||[]))['next']());});};Object[a5_0x240b('0x1c')](exports,'__esModule',{'value':!![]});exports['DistributedAgentApi']=void 0x0;const axios_1=require(a5_0x240b('0x5'));const environment_1=require('../../../utilities/environment');const metric_logger_1=require('../../../utilities/metric-logger');const {output}=require(a5_0x240b('0x15'));class DistributedAgentApi{constructor(_0x18a5ef,_0x2dede5,_0x26ebe1,_0x5b7fbc,_0x321f4a,_0x2fb435){this[a5_0x240b('0x4')]=_0x2dede5;this[a5_0x240b('0x20')]=_0x26ebe1;this['ciExecutionId']=_0x5b7fbc;this[a5_0x240b('0xd')]=_0x321f4a;this[a5_0x240b('0x3')]=_0x2fb435;this[a5_0x240b('0x8')]=(0x0,axios_1[a5_0x240b('0x21')])(_0x18a5ef);}[a5_0x240b('0x12')](_0x209c4e,_0x5ed976,_0x1014b7,_0x311ab3){var _0x57a284;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2efd8d=(0x0,metric_logger_1['createMetricRecorder'])(a5_0x240b('0x17'));try{const _0xbe28f9=yield(0x0,axios_1[a5_0x240b('0x2')])(()=>this['apiAxiosInstance'][a5_0x240b('0x0')](a5_0x240b('0x16'),{'runGroup':this[a5_0x240b('0x20')],'ciExecutionId':this[a5_0x240b('0xe')],'ciExecutionEnv':this[a5_0x240b('0xd')],'agentName':this[a5_0x240b('0x3')],'executionId':_0x209c4e,'statusCode':_0x5ed976,'completedTasks':_0x1014b7,'targets':_0x311ab3}));_0x2efd8d['recordMetric']((0x0,metric_logger_1[a5_0x240b('0x22')])(_0xbe28f9));return _0xbe28f9[a5_0x240b('0x1')];}catch(_0x1b859c){_0x2efd8d[a5_0x240b('0x1e')](((_0x57a284=_0x1b859c===null||_0x1b859c===void 0x0?void 0x0:_0x1b859c[a5_0x240b('0x9')])===null||_0x57a284===void 0x0?void 0x0:_0x57a284['response'])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x1b859c['axiosException']['response']):metric_logger_1[a5_0x240b('0xa')]);throw _0x1b859c;}});}['completeRunGroupWithError'](_0x3a3363){var _0x5b5c46;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x240b('0x13')]){output[a5_0x240b('0xf')]({'title':a5_0x240b('0x11'),'bodyLines':[a5_0x240b('0x10')+this[a5_0x240b('0xe')],'ciExecutionEnv:\x20'+this[a5_0x240b('0xd')],a5_0x240b('0x19')+this[a5_0x240b('0x20')],'error:\x20'+_0x3a3363]});}const _0x542cdc=(0x0,metric_logger_1['createMetricRecorder'])('completeRunGroup');try{const _0x4dbcef=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a5_0x240b('0x8')][a5_0x240b('0x0')]('/nx-cloud/executions/complete-run-group',{'branch':this[a5_0x240b('0x4')],'runGroup':this['runGroup'],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0x240b('0xd')],'agentName':this[a5_0x240b('0x3')],'criticalErrorMessage':_0x3a3363}));if(environment_1[a5_0x240b('0x13')]){output[a5_0x240b('0xf')]({'title':a5_0x240b('0x14')});}_0x542cdc[a5_0x240b('0x1e')]((0x0,metric_logger_1[a5_0x240b('0x22')])(_0x4dbcef));}catch(_0x512796){_0x542cdc[a5_0x240b('0x1e')](((_0x5b5c46=_0x512796===null||_0x512796===void 0x0?void 0x0:_0x512796[a5_0x240b('0x9')])===null||_0x5b5c46===void 0x0?void 0x0:_0x5b5c46[a5_0x240b('0x1b')])?(0x0,metric_logger_1[a5_0x240b('0x22')])(_0x512796[a5_0x240b('0x9')][a5_0x240b('0x1b')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);console[a5_0x240b('0xb')](_0x512796);}});}}exports[a5_0x240b('0x1a')]=DistributedAgentApi;