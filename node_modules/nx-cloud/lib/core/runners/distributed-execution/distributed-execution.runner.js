const a11_0x5bdc=['Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','endTasks','then','tasks','SIGINT','completeRunGroupWithError','next','See\x20run\x20details\x20at\x20','success','Main\x20job\x20was\x20terminated\x20via\x20SIGTERM','start','DTE\x20needs\x20the\x20cache\x20to\x20share\x20files\x20between\x20agents.','error','Unable\x20to\x20complete\x20a\x20run.','ErrorReporterApi','value','encryptionKey','apply','__esModule','Successfully\x20completed\x20running\x20the\x20command.','scheduleTask','__awaiter','commandStatus','nxCloudDistributedTasksRunner','skipNxCache','./distributed-execution.api','warn','message','log','--skip-nx-cache\x20is\x20ignored\x20when\x20using\x20distributed\x20tasks\x20execution\x20(DTE).','getCIExecutionId','createTaskGraphCompat','lifeCycle','taskGraph','axiosException','values','../../../utilities/metric-logger','ENCRYPTION_KEY','startTask','./split-task-graph-into-stages','note','./task-graph-creator','E2EEncryption','../../file-storage/e2e-encryption','./process-tasks','Command\x20execution\x20failed.','../../api/error-reporter.api','defineProperty','getRunGroup','../../error/print-run-group-error','DteArtifactStorage','../../../utilities/environment','done','exit','throw','../../../utilities/nx-imports','projectGraph','VERBOSE_LOGGING','splitTasksIntoStages','processTasks','getBranch','printRunGroupError','runUrl','extractGitRef','extractGitSha','SIGTERM'];(function(_0x578b42,_0x5bdce8){const _0x2dc90c=function(_0xc8d9ff){while(--_0xc8d9ff){_0x578b42['push'](_0x578b42['shift']());}};_0x2dc90c(++_0x5bdce8);}(a11_0x5bdc,0x1d4));const a11_0x2dc9=function(_0x578b42,_0x5bdce8){_0x578b42=_0x578b42-0x0;let _0x2dc90c=a11_0x5bdc[_0x578b42];return _0x2dc90c;};'use strict';var __awaiter=this&&this[a11_0x2dc9('0xf')]||function(_0x527abd,_0x534794,_0x4dcb1e,_0x1fcbbd){function _0x11330b(_0x2f02cf){return _0x2f02cf instanceof _0x4dcb1e?_0x2f02cf:new _0x4dcb1e(function(_0x1f99c6){_0x1f99c6(_0x2f02cf);});}return new(_0x4dcb1e||(_0x4dcb1e=Promise))(function(_0x3e7046,_0xce139a){function _0xa250dc(_0x32d926){try{_0x81a85(_0x1fcbbd[a11_0x2dc9('0x0')](_0x32d926));}catch(_0x1c53bd){_0xce139a(_0x1c53bd);}}function _0xa4c67d(_0x16eac1){try{_0x81a85(_0x1fcbbd[a11_0x2dc9('0x30')](_0x16eac1));}catch(_0x114777){_0xce139a(_0x114777);}}function _0x81a85(_0x29b42f){_0x29b42f[a11_0x2dc9('0x2e')]?_0x3e7046(_0x29b42f[a11_0x2dc9('0x9')]):_0x11330b(_0x29b42f[a11_0x2dc9('0x9')])[a11_0x2dc9('0x3e')](_0xa250dc,_0xa4c67d);}_0x81a85((_0x1fcbbd=_0x1fcbbd[a11_0x2dc9('0xb')](_0x527abd,_0x534794||[]))['next']());});};Object[a11_0x2dc9('0x29')](exports,a11_0x2dc9('0xc'),{'value':!![]});exports[a11_0x2dc9('0x11')]=void 0x0;const environment_1=require(a11_0x2dc9('0x2d'));const metric_logger_1=require(a11_0x2dc9('0x1e'));const error_reporter_api_1=require(a11_0x2dc9('0x28'));const print_run_group_error_1=require(a11_0x2dc9('0x2b'));const e2e_encryption_1=require(a11_0x2dc9('0x25'));const file_storage_1=require('../../file-storage/file-storage');const distributed_execution_api_1=require(a11_0x2dc9('0x13'));const split_task_graph_into_stages_1=require(a11_0x2dc9('0x21'));const task_graph_creator_1=require(a11_0x2dc9('0x23'));const process_tasks_1=require(a11_0x2dc9('0x26'));const dte_artifact_storage_1=require('../../../utilities/dte-artifact-storage');const {output,cacheDirectory}=require(a11_0x2dc9('0x31'));class NoopLifeCycle{[a11_0x2dc9('0xe')](_0x241e8c){}[a11_0x2dc9('0x20')](_0x2c6f80){}[a11_0x2dc9('0x3d')](_0x5d9adb){}}const nxCloudDistributedTasksRunner=(_0x49c766,_0x301dd1,_0x180bdf)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(_0x301dd1[a11_0x2dc9('0x12')]){output[a11_0x2dc9('0x14')]({'title':a11_0x2dc9('0x17'),'bodyLine':[a11_0x2dc9('0x5')]});}if(environment_1[a11_0x2dc9('0x33')]){output[a11_0x2dc9('0x22')]({'title':'Starting\x20distributed\x20command\x20execution'});}_0x301dd1[a11_0x2dc9('0x1a')]=new NoopLifeCycle();const _0x49a7cd=(0x0,environment_1[a11_0x2dc9('0x36')])();const _0x17330f=(0x0,environment_1[a11_0x2dc9('0x2a')])();const _0xc22899=(0x0,environment_1[a11_0x2dc9('0x18')])();const _0x2b0a2f=(0x0,environment_1['getCIExecutionEnv'])();const _0x4eb2f8=(0x0,environment_1[a11_0x2dc9('0x3a')])();const _0x20783e=(0x0,environment_1[a11_0x2dc9('0x39')])();if(!(0x0,print_run_group_error_1['canDetectRunGroup'])(_0x17330f,_0xc22899)){(0x0,print_run_group_error_1[a11_0x2dc9('0x37')])();process['exit'](0x1);}const _0x525d62=new e2e_encryption_1[(a11_0x2dc9('0x24'))](environment_1[a11_0x2dc9('0x1f')]||_0x301dd1[a11_0x2dc9('0xa')]);const _0x31aaaa=new error_reporter_api_1[(a11_0x2dc9('0x8'))](_0x301dd1);const _0x47aa19=new dte_artifact_storage_1[(a11_0x2dc9('0x2c'))](new file_storage_1['FileStorage'](_0x525d62,_0x31aaaa,_0x301dd1,'dte-main'),cacheDirectory);const _0x4e2661=new distributed_execution_api_1['DistributedExecutionApi'](_0x301dd1);attachSignalListenersToCompleteRunGroupOnError(_0x4e2661,_0x49a7cd,_0x17330f,_0xc22899,_0x2b0a2f);try{const _0x3ad13d=getTaskGraph(_0x180bdf,_0x49c766,_0x301dd1);const _0x5cf75f=yield runDistributedExecution(_0x4e2661,_0x301dd1,_0x47aa19,_0x49a7cd,_0x17330f,_0xc22899,_0x2b0a2f,_0x3ad13d,_0x4eb2f8,_0x20783e);if(_0x5cf75f[a11_0x2dc9('0x10')]===0x0){output[a11_0x2dc9('0x2')]({'title':a11_0x2dc9('0xd'),'bodyLines':[a11_0x2dc9('0x1')+_0x5cf75f[a11_0x2dc9('0x38')]]});}else{output[a11_0x2dc9('0x6')]({'title':a11_0x2dc9('0x27'),'bodyLines':['See\x20run\x20details\x20at\x20'+_0x5cf75f[a11_0x2dc9('0x38')]]});}yield(0x0,metric_logger_1['submitRunMetrics'])(_0x301dd1);process[a11_0x2dc9('0x2f')](_0x5cf75f[a11_0x2dc9('0x10')]);}catch(_0x3430e8){output[a11_0x2dc9('0x6')]({'title':a11_0x2dc9('0x7'),'bodyLines':[_0x3430e8[a11_0x2dc9('0x15')]]});if(_0x3430e8[a11_0x2dc9('0x1c')]){console['log'](_0x3430e8[a11_0x2dc9('0x1c')]);}else{console[a11_0x2dc9('0x16')](_0x3430e8);}try{yield _0x4e2661[a11_0x2dc9('0x41')](_0x49a7cd,_0x17330f,_0xc22899,_0x2b0a2f,a11_0x2dc9('0x3c')+_0x3430e8[a11_0x2dc9('0x15')]+'\x22');}finally{process['exit'](0x1);}}});exports[a11_0x2dc9('0x11')]=nxCloudDistributedTasksRunner;function getTaskGraph(_0x2104bb,_0x45566a,_0x43dce4){if(_0x2104bb[a11_0x2dc9('0x1b')]){return _0x2104bb['taskGraph'];}else{return(0x0,task_graph_creator_1[a11_0x2dc9('0x19')])(_0x43dce4,_0x2104bb[a11_0x2dc9('0x32')],_0x45566a);}}function attachSignalListenersToCompleteRunGroupOnError(_0x5534ed,_0x981231,_0x1385b1,_0x246456,_0xcb9cd2){process['on'](a11_0x2dc9('0x40'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x5534ed['completeRunGroupWithError'](_0x981231,_0x1385b1,_0x246456,_0xcb9cd2,'Main\x20job\x20was\x20terminated\x20via\x20SIGINT');process[a11_0x2dc9('0x2f')](0x1);}));process['on'](a11_0x2dc9('0x3b'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x5534ed[a11_0x2dc9('0x41')](_0x981231,_0x1385b1,_0x246456,_0xcb9cd2,a11_0x2dc9('0x3'));process['exit'](0x1);}));}function runDistributedExecution(_0x1516b2,_0x509a87,_0x1b7630,_0x372186,_0x23df7b,_0x34ecda,_0x32fd45,_0x29c305,_0x362cea,_0xd76541){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5d31a6=yield _0x1516b2[a11_0x2dc9('0x4')]((0x0,distributed_execution_api_1['createStartRequest'])(_0x372186,_0x23df7b,_0x34ecda,_0x32fd45,(0x0,split_task_graph_into_stages_1[a11_0x2dc9('0x34')])(_0x29c305),_0x509a87,_0x362cea));return yield(0x0,process_tasks_1[a11_0x2dc9('0x35')])(_0x1516b2,_0x1b7630,_0x5d31a6,Object[a11_0x2dc9('0x1d')](_0x29c305[a11_0x2dc9('0x3f')]));});}