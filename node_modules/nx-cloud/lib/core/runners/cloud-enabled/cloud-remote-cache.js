const a2_0x16cf=['push','storage','put','Error\x20when\x20storing\x20artifacts','retrieve','indexOf','store','runContext','then','done','VERBOSE_LOGGING','get','axiosException','response','resolve','storeRequests','statuses','requests','delayedStoreRequests','waitForStoreRequestsToComplete','distributedExecutionId','fileStorage','scheduledTasks','Nx\x20Cloud:\x20Skipping\x20storing\x20','hash','next','extractErrorMessage','forEach','value','hashUrls','__esModule','throw','startRun','cacheError','messages','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','.\x20Status\x20404.','cache-miss','Nx\x20Cloud:\x20Cache\x20miss\x20','api','remote-cache-hit','CloudRemoteCache','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.'];(function(_0x48630a,_0x16cf39){const _0x5011f1=function(_0x510e86){while(--_0x510e86){_0x48630a['push'](_0x48630a['shift']());}};_0x5011f1(++_0x16cf39);}(a2_0x16cf,0x194));const a2_0x5011=function(_0x48630a,_0x16cf39){_0x48630a=_0x48630a-0x0;let _0x5011f1=a2_0x16cf[_0x48630a];return _0x5011f1;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x3b69e5,_0x10a4bf,_0x672950,_0x4d25f2){function _0x44fb2c(_0x4a1313){return _0x4a1313 instanceof _0x672950?_0x4a1313:new _0x672950(function(_0x5bc94d){_0x5bc94d(_0x4a1313);});}return new(_0x672950||(_0x672950=Promise))(function(_0x2806db,_0x4c8f2c){function _0x5c4845(_0x50af2d){try{_0x1134c5(_0x4d25f2[a2_0x5011('0x8')](_0x50af2d));}catch(_0x254b77){_0x4c8f2c(_0x254b77);}}function _0x2b704b(_0x176b1d){try{_0x1134c5(_0x4d25f2[a2_0x5011('0xe')](_0x176b1d));}catch(_0x2d79ea){_0x4c8f2c(_0x2d79ea);}}function _0x1134c5(_0x28bec5){_0x28bec5[a2_0x5011('0x23')]?_0x2806db(_0x28bec5[a2_0x5011('0xb')]):_0x44fb2c(_0x28bec5[a2_0x5011('0xb')])[a2_0x5011('0x22')](_0x5c4845,_0x2b704b);}_0x1134c5((_0x4d25f2=_0x4d25f2['apply'](_0x3b69e5,_0x10a4bf||[]))[a2_0x5011('0x8')]());});};Object['defineProperty'](exports,a2_0x5011('0xd'),{'value':!![]});exports['CloudRemoteCache']=void 0x0;const environment_1=require('../../../utilities/environment');const {output}=require('../../../utilities/nx-imports');class CloudRemoteCache{constructor(_0x1926b7,_0x26c37a,_0x27c2df,_0x4f1a06,_0x217f90,_0x5a6fad){this[a2_0x5011('0x11')]=_0x1926b7;this[a2_0x5011('0x16')]=_0x26c37a;this[a2_0x5011('0x21')]=_0x27c2df;this[a2_0x5011('0x4')]=_0x4f1a06;this[a2_0x5011('0x3')]=_0x217f90;this['storeInCurrentProcess']=_0x5a6fad;this[a2_0x5011('0x29')]=[];this['delayedStoreRequests']=[];}[a2_0x5011('0x1e')](_0x4def98,_0xf2517a){var _0x55b6e3;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x5011('0x11')]['cacheError'])return![];const _0x5772b9=yield this[a2_0x5011('0xc')](_0x4def98);if(!_0x5772b9||!_0x5772b9[a2_0x5011('0x25')]){if(environment_1['VERBOSE_LOGGING']){output['note']({'title':a2_0x5011('0x15')+_0x4def98+'.'});}this[a2_0x5011('0x21')][a2_0x5011('0x2a')][_0x4def98]=a2_0x5011('0x14');return![];}try{yield this[a2_0x5011('0x4')]['retrieve'](_0x4def98,_0x5772b9[a2_0x5011('0x25')],_0xf2517a);this['runContext'][a2_0x5011('0x2a')][_0x4def98]=a2_0x5011('0x17');return!![];}catch(_0x490045){const _0x260c6a=(_0x55b6e3=_0x490045[a2_0x5011('0x26')])!==null&&_0x55b6e3!==void 0x0?_0x55b6e3:_0x490045;if(_0x260c6a[a2_0x5011('0x27')]&&_0x260c6a[a2_0x5011('0x27')]['status']===0x194){if(environment_1[a2_0x5011('0x24')]){output['note']({'title':a2_0x5011('0x15')+_0x4def98+a2_0x5011('0x13')});}}else{this[a2_0x5011('0x11')][a2_0x5011('0x10')]=this['messages'][a2_0x5011('0x9')](_0x260c6a,a2_0x5011('0x1b'));}this[a2_0x5011('0x21')][a2_0x5011('0x2a')][_0x4def98]='cache-miss';return![];}});}[a2_0x5011('0x20')](_0x445748,_0x48bb60){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x5011('0x11')][a2_0x5011('0x10')])return![];const _0x28f5b4=Promise[a2_0x5011('0x28')]()[a2_0x5011('0x22')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x4fcc6c;const _0x172c54=yield this[a2_0x5011('0xc')](_0x445748);if(!_0x172c54)return![];if(!_0x172c54[a2_0x5011('0x1c')]){if(environment_1['VERBOSE_LOGGING']){output['note']({'title':a2_0x5011('0x6')+_0x445748+'.','bodyLines':[a2_0x5011('0x19'),a2_0x5011('0x12')]});}return!![];}if(!this['storeInCurrentProcess']){this[a2_0x5011('0x1')][a2_0x5011('0x1a')]({'hash':_0x445748,'url':_0x172c54[a2_0x5011('0x1c')]});return!![];}try{yield this[a2_0x5011('0x4')][a2_0x5011('0x20')](_0x445748,_0x172c54[a2_0x5011('0x1c')],_0x48bb60);return!![];}catch(_0x44fbc6){const _0x5ae49b=(_0x4fcc6c=_0x44fbc6[a2_0x5011('0x26')])!==null&&_0x4fcc6c!==void 0x0?_0x4fcc6c:_0x44fbc6;this[a2_0x5011('0x11')]['cacheError']=this[a2_0x5011('0x11')][a2_0x5011('0x9')](_0x5ae49b,a2_0x5011('0x1b'));return![];}}));this['storeRequests'][a2_0x5011('0x1a')](_0x28f5b4);return _0x28f5b4;});}['hashUrls'](_0x22fe7a){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x22fe7a in this[a2_0x5011('0x21')][a2_0x5011('0x0')]){return(yield this['runContext']['requests'][_0x22fe7a])[_0x22fe7a];}else{const _0x342163=this[a2_0x5011('0x21')][a2_0x5011('0x5')]['filter'](_0x1a5fe9=>!this['runContext'][a2_0x5011('0x0')][_0x1a5fe9[a2_0x5011('0x7')]])['map'](_0x18f3bc=>_0x18f3bc[a2_0x5011('0x7')]);if(_0x342163[a2_0x5011('0x1f')](_0x22fe7a)===-0x1){_0x342163[a2_0x5011('0x1a')](_0x22fe7a);}const _0x2a7e9b=this[a2_0x5011('0x16')][a2_0x5011('0xf')](this[a2_0x5011('0x3')],_0x342163);_0x342163[a2_0x5011('0xa')](_0x331de=>{this['runContext']['requests'][_0x331de]=_0x2a7e9b;});return(yield _0x2a7e9b)[_0x22fe7a];}});}[a2_0x5011('0x2')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1deedf=yield Promise['all'](this[a2_0x5011('0x29')])[a2_0x5011('0x22')](_0x5b36a2=>_0x5b36a2['reduce']((_0x2cebf0,_0x57f09f)=>_0x2cebf0&&_0x57f09f,!![]));if(!_0x1deedf){throw new Error(a2_0x5011('0x1d'));}});}}exports[a2_0x5011('0x18')]=CloudRemoteCache;